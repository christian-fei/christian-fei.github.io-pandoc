<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>
    {% if page.title %}
      {{ page.title }} - {{ site.name }}
    {% else %}
      {{ site.name }}
    {% endif %}
    </title>
    <meta name="description" content="{{ site.meta_description}}" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@site_username">
    <meta name="twitter:creator" content="@creator_username">
    {% if page.title %}
      <meta name="twitter:title" content="{{ page.title }}">
    {% else %}
      <meta name="twitter:title" content="{{ site.title }}">
    {% endif %}
    {% if page.url %}
      <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
    {% endif %}
    {% if page.description %}
      <meta name="twitter:description" content="{{ page.description }}">
    {% else %}
      <meta name="twitter:description" content="{{ site.description }}">
    {% endif %}

    <link rel="stylesheet" href="/dest/main.min.css" />
  </head>
  <body class="avenir">
    {% include main-header.html %}
    {% include intro-line.html %}
    <main {% unless page.free_layout %} class="ph3 ph5-ns" {% endunless %}>
      {{ content }}
    </main>
    {% include main-footer.html %}

    <script src="/assets/js/echo.js"></script>
    <script src="https://unpkg.com/simple-jekyll-search@latest/dest/jekyll-search.min.js" type="text/javascript"></script>

    <script>
      echo.init({
        offset: 100,
        throttle: 250,
        unload: false
      });

      var searchJSON = []
      SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search.json',
        searchResultTemplate: '<li><a class="grow-focus" href="{{ site.url }}{url}">{title}</a></li>',
        templateMiddleware: function(prop, value, template){
          debugger
          searchJSON.push(value)
          return value
        },
        middleware: function(prop, value, template){
          debugger
          searchJSON.push(value)
          return value
        },
      })
      console.log(searchJSON)
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57238829-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>
